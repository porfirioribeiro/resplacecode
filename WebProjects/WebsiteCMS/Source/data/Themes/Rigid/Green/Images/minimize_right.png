<?php
class iWidgets{
	var $widgets=array();
	var $openedWidgets=array();
	function iWidgets(){
		$this->loadFunc();
	}
	function register($tag,$class){
		$this->widgets[$tag]=$class;
	}
	function T($tag,$args){
		if (strpos($tag,"/")===false){
			if (!array_key_exists($tag,$this->widgets)){
				die("<p>Tag <b>".$tag."</b> do not exists or is not registed</p>");
			}
			if (!array_key_exists($tag,$this->openedWidgets)){
				$this->openedWidgets[$tag]=array();
			}
			$ct=$this->openedWidgets[$tag][]=new $this->widgets[$tag]($args);			
			$ct->open();
		}else if (strpos($tag,"/")==0){
			$tag=substr($tag,1);
			if (!array_key_exists($tag,$this->widgets)){
				die("<p>Tag <b>".$tag."</b> do not exists or is not registed</p>");
			}
			$ct=$this->openedWidgets[$tag][sizeof($this->openedWidgets[$tag])-1];
	